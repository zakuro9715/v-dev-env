default: run-main
tasks:
  build:
    tasks:
      fmt:
        run: v cmd/tools/vfmt.v
  debug:
    tasks:
      fmt:
        run: v cmd/tools/vfmt.v && v fmt
  run:
    run: v run main.v
  main:
    run: v main.v
  main.c:
    run: v main.v -o main.c
  test:
    run: v test
    tasks:
      fmt:
        run: v test vlib/v/fmt/fmt_test.v
      fmt-keep:
        run: v test vlib/v/fmt/fmt_keep_test.v
      fmt-all:
        run: |
          z test fmt
          z test fmt-keep
      compiler:
        run: v test vlib/v/tests
        tasks:
          errors:
            run: v test vlib/v/compiler_errors_test.v
  fmt:
    run: v fmt -w
    tasks:
      cleancode:
        run: |
          cat cmd/tools/vtest-cleancode.v \
          | head -n 80 | tail -n 60 \
          | sed 's/\s//g' | grep -E "^'.*/.*',$" | sed "s/[',]//g" \
          | xargs v fmt -w
