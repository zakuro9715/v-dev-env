tasks:
  self: v self
  build:
    run: v
    args:
      default: main.v
    tasks:
      fmt: v cmd/tools/vfmt.v
  debug.fmt: z build fmt && v fmt
  run: v run main.v
  main: v main.v
  mainc: v main.v -o main.c
  test:
    run: v test
    tasks:
      fmt:
        v test vlib/v/fmt/fmt_test.v
      fmt-keep:
        v test vlib/v/fmt/fmt_keep_test.v
      fmt-all: |
        z test fmt
        z test fmt-keep
      checker: z test compiler errors
      compiler:
        run: v test vlib/v/tests
        tasks:
          errors: v test vlib/v/compiler_errors_test.v
  check-md: v run cmd/tools/check-md.v -all
  fmt:
    run: v fmt -w
    tasks:
      cleancode: |
        cat cmd/tools/vtest-cleancode.v \
        | head -n 75 | tail -n 60 \
        | sed 's/\s//g' | grep -E "^'.*/.*',$" | sed "s/[',]//g" \
        | xargs v fmt -w
